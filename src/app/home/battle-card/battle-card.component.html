<div class="battle-card-wrapper">

    <select class="select-category" [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
        <option value="" disabled selected>Select a Category</option>
        <option value="AI model">AI model</option>
        <option value="Agent">Agent</option>
        <option value="Voice">Voice</option>
        <option value="Image">Image</option>
        <option value="Video Editing">Video Editing</option>
        <option value="Dev Tools">Dev Tools</option>
        <option value="Utility">Utility</option>
    </select>

    <div class="searchinputwrapper" *ngIf="iscategoryselected">
        <h3>Select Tools for Battle (max 3)</h3>

        <input type="text" placeholder="Filter by name..." [(ngModel)]="filterTerm" (input)="onFilterChange()"
            class="search-bar-products">

    </div>


    <div class="filtered-cards-container" *ngIf="displayedTypeTools.length > 0; else noItems">


        <div class="filtered-card" *ngFor="let tool of displayedTypeTools" (click)="toggleSelect(tool)">
            <img [src]="tool.icon" alt="tool" class="tool-img" />
            <span class="tool-name">{{ tool.name }}</span>
        </div>
    </div>

    <ng-template #noItems>
        <div class="no-items-message">
            No category items found
        </div>
    </ng-template>
</div>

<!-- Selected tools -->
<div *ngIf="selectedTools.length > 0" class="filtered-cards-wrapper">
    <h3>Selected Tools</h3>
    <div class="filtered-cards-container">
        <div class="filtered-card" *ngFor="let tool of selectedTools">
            <img [src]="tool.icon" alt="" class="tool-img">
            <span class="tool-name">{{ tool.name }}</span>
            <div class="select-circle" *ngIf="tool.selected">{{ tool.selected }}</div>
        </div>
    </div>













    <!-- âœ… Selected Models Section -->
    <div *ngIf="selectedTools.length > 0" class="selected-models-wrapper">
        <span class="separater"></span>

        <div class="filtered-cards-container">
            <div class="filtered-card" *ngFor="let tool of displayedSelectedTools" (click)="toggleSelect(tool)">
                <img [src]="tool.icon" alt="" class="tool-img">
                <span class="tool-name">{{tool.name}}</span>
                <div class="select-circle">{{tool.selected}}</div>
            </div>
        </div>
    </div>




    <!-- Make Battle Button -->

    <!-- Selected Tools Table -->
    <table *ngIf="selectedTools.length > 0" class="battle-table">
        <thead>
            <tr>
                <th class="property-col">Property</th>
                <th *ngFor="let tool of selectedTools" class="tool-col">
                    <div class="tool-header">
                        <img [src]="tool.icon" alt="{{tool.name}}" class="header-tool-img">
                    </div>
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Product Names -->
            <tr>
                <td class="property">Name</td>
                <td *ngFor="let tool of selectedTools">{{ tool.name }}</td>
            </tr>

            <!-- Type -->
            <tr>
                <td class="property">Type</td>
                <td *ngFor="let tool of selectedTools">{{ tool.type }}</td>
            </tr>

            <!-- Tags -->
            <tr>
                <td class="property">Tags</td>
                <td *ngFor="let tool of selectedTools">{{ tool.tags.join(', ') }}</td>
            </tr>

            <!-- See Review Button -->
            <tr>
                <td class="property">Actions</td>
                <td *ngFor="let tool of selectedTools">
                    <button class="review-btn" (click)="openReview(tool)">See Reviews</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Modal -->
    <div *ngIf="popupSelected.length > 0" class="modal-backdrop">
        <div class="modal">
            <span class="close-btn" (click)="closePopup()"> <img src="../../../assets/images/close.png" alt=""></span>
            <div class="modal-content" *ngFor="let product of popupSelected">
                <h3>{{ product.name }}</h3>
                <p><strong>Type:</strong> {{ product.type }}</p>
                <p><strong>Tags:</strong> {{ product.tags.join(', ') }}</p>
            </div>
            <div class="modal-actions">
            </div>
        </div>
    </div>





</div>