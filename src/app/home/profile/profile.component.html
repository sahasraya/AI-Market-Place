<div class="profile-container">
    <!-- Left Side Tabs -->
    <div class="tabs">
        <div class="tab" [class.active]="activeTab === 'Profile'" (click)="setActiveTab('Profile')">Profile</div>
        <div class="tab" [class.active]="activeTab === 'Your Tools'" (click)="setActiveTab('Your Tools')">Your Tools
        </div>
        <div class="tab" [class.active]="activeTab === 'Reviews'" (click)="setActiveTab('Reviews')">Reviews</div>
        <div class="tab" [class.active]="activeTab === 'Access'" (click)="setActiveTab('Access')">Access</div>
    </div>

    <!-- Right Side Content -->
    <div class="tab-content">
        <!-- Profile Tab -->
        <div *ngIf="activeTab === 'Profile'">
            <div class="profile-header">
                <div class="profile-avatar">
                    {{ userInitials }}
                </div>
            </div>
            <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" formControlName="name">
                </div>
                <div class="form-group">
                    <label>LinkedIn</label>
                    <input type="text" formControlName="linkedin">
                </div>
                <div class="form-group">
                    <label>Facebook</label>
                    <input type="text" formControlName="facebook">
                </div>
                <div class="form-group">
                    <label>Designation</label>
                    <input type="text" formControlName="designation">
                </div>
                <div class="form-group">
                    <label>About Me</label>
                    <textarea formControlName="about" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" formControlName="email">
                </div>
                <button type="submit" [disabled]="profileForm.invalid">Update</button>
            </form>
        </div>

        <!-- Placeholder Tabs -->
        <div *ngIf="activeTab === 'Your Tools'" class="tools-tab">
            <div class="cards-container flex-wrap" #toolsContainer *ngIf="!isaddingnewproduct">

                <!-- Add Product Button -->
                <div class="product-card add-product" (click)="onAddProduct()">
                    <div class="product-icon">
                        <img src="../../../assets/images/addproduct.svg" alt="Add Product" />
                    </div>
                    <h3 class="product-name">Add Product</h3>
                </div>

                <!-- Product Cards -->
                <app-smaller-product-card *ngFor="let tool of toolsArray" [product]="tool"
                    (productDeleted)="onProductDeleted($event)">
                </app-smaller-product-card>

            </div>









            <span class="loadmorebtn" *ngIf="!isaddingnewproduct">Load more</span>
            <div class="addingnewproduct-holder" *ngIf="isaddingnewproduct">
                <div class="titale-holder" (click)="closeAddProduct()">
                    <img src="../../../assets/images/leftarrow.png" alt="close" class="close-productbtn">
                    <h3>Add Product</h3>

                </div>

                <form [formGroup]="productAddingForm" (ngSubmit)="onSubmitProduct()" class="new-product-form">
                    <img [src]="selectedImage || '../../../assets/images/12.png'" alt="Product Image"
                        class="profile-image" />

                    <div class="form-group">
                        <label>Product Image</label>
                        <input type="file" (change)="onImageSelected($event)" accept="image/*" />
                    </div>

                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" formControlName="name" placeholder="Enter product name" />
                    </div>

                    <div class="form-group">
                        <label>Product Category</label>
                        <select class="select-category" formControlName="type">
                            <option value="" disabled>Select a Category</option>
                            <option value="AI model">AI model</option>
                            <option value="Agent">Agent</option>
                            <option value="Voice">Voice</option>
                            <option value="Image">Image</option>
                            <option value="Video Editing">Video Editing</option>
                            <option value="Dev Tools">Dev Tools</option>
                            <option value="Utility">Utility</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>License</label>
                        <select class="select-category" formControlName="license">
                            <option value="" disabled>Select License</option>
                            <option value="Free">Free</option>
                            <option value="Paid">Paid</option>
                            <option value="Free&Paid">Free & Paid</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Technology</label>
                        <select class="select-category" formControlName="technology">
                            <option value="" disabled>Select Technology</option>
                            <option value="sass">SASS</option>
                            <option value="pass">PASS</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Website</label>
                        <input type="url" formControlName="website" placeholder="Enter product website" />
                    </div>

                    <div class="form-group">
                        <label>Funding Stage</label>
                        <input type="text" formControlName="fundingStage" placeholder="e.g., Seed, Series A" />
                    </div>

                    <!-- Use Cases -->
                    <div class="form-group">
                        <label>Use Cases</label>
                        <div class="selected-chips">
                            <div class="chip" *ngFor="let usecase of selectedUseCases">
                                {{ usecase }}
                                <span class="close-icon" (click)="removeUseCase(usecase)">âœ•</span>
                            </div>
                        </div>

                        <div class="dropwdown-wrapper">
                            <input type="text" placeholder="Search or add use case" [value]="useCaseInput"
                                (input)="onUseCaseInput($event)" />
                            <div class="dropdown" *ngIf="filteredUseCases.length > 0">
                                <div class="dropdown-item" *ngFor="let usecase of filteredUseCases"
                                    (click)="selectUseCase(usecase)">
                                    {{ usecase }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Product Facebook Link</label>
                        <input type="text" formControlName="productfb" placeholder="Product Facebook Link" />
                    </div>

                    <div class="form-group">
                        <label>Product LinkedIn Link</label>
                        <input type="text" formControlName="productlinkedin" placeholder="Product LinkedIn Link" />
                    </div>

                    <!-- Founders -->
                    <div class="form-group" formArrayName="founders">
                        <label>Founders</label>
                        <div *ngFor="let founder of founders.controls; let i = index" class="dynamic-field">
                            <input type="text" [formControlName]="i" placeholder="Enter founder name" />
                            <button type="button" class="btn-add" (click)="addField(founders)">+</button>
                            <button type="button" class="btn-remove" (click)="removeField(founders, i)">
                                -
                            </button>
                        </div>
                    </div>

                    <!-- Base Models -->
                    <div class="form-group" formArrayName="baseModels">
                        <label>Base AI Model</label>
                        <div *ngFor="let model of baseModels.controls; let i = index" class="dynamic-field">
                            <input type="text" [formControlName]="i" placeholder="Enter AI model" />
                            <button type="button" class="btn-add" (click)="addField(baseModels)">+</button>
                            <button type="button" class="btn-remove" (click)="removeField(baseModels, i)">
                                -
                            </button>
                        </div>
                    </div>

                    <!-- Deployments -->
                    <div class="form-group" formArrayName="deployments">
                        <label>Deployment</label>
                        <div *ngFor="let deploy of deployments.controls; let i = index" class="dynamic-field">
                            <input type="text" [formControlName]="i" placeholder="Enter deployment type" />
                            <button type="button" class="btn-add" (click)="addField(deployments)">+</button>
                            <button type="button" class="btn-remove" (click)="removeField(deployments, i)">
                                -
                            </button>
                        </div>
                    </div>

                    <!-- Media Previews -->
                    <div class="form-group" formArrayName="mediaPreviews">
                        <label>Media Previews</label>
                        <div *ngFor="let media of mediaPreviews.controls; let i = index" class="dynamic-field">
                            <input type="url" [formControlName]="i"
                                placeholder="Enter media link (e.g., YouTube, Twitter)" />
                            <button type="button" class="btn-add" (click)="addField(mediaPreviews)">+</button>
                            <button type="button" class="btn-remove" (click)="removeField(mediaPreviews, i)">
                                -
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea formControlName="productdescription">

                         </textarea>
                    </div>


                    <!-- Submit -->
                    <div class="form-actions">
                        <button type="submit" class="btn-submit" [disabled]="productAddingForm.invalid">
                            {{ submitButtonText }}
                        </button>
                    </div>
                </form>




            </div>



        </div>





<div *ngIf="activeTab === 'Reviews'" class="reviews-tab">
  <h2>Reviews</h2>

  <div *ngIf="reviewsArray.length === 0 && !isLoadingUserReviews" class="no-reviews">
    <p>No reviews available.</p>
  </div>

  <div *ngIf="isLoadingUserReviews" class="loading-reviews">
    <p>Loading reviews...</p>
  </div>

  <div class="review-card" *ngFor="let review of reviewsArray">
    <!-- User Profile Image -->

    <!-- Review Content -->
    <div class="review-content">
      <div class="review-header">
        <span class="review-username">{{ review.username }}</span>
        <span class="review-date">{{ review.createddate | date:'mediumDate' }}</span>
         
        
      </div>
      <p class="review-comment">{{ review.comment }}</p>
    
    </div>

    <!-- Three-dot Menu -->
    <img src="../../../assets/images/dotmenu.svg" alt="Menu" class="dotmenu"
      (click)="toggleReviewDropdown(review, $event)">

    <div class="dotmenudropdown" *ngIf="review.showDropdown">
      <ul>
        <li  > <a [routerLink]="['/home/product-item']" [queryParams]="{ productid: review.productid }" class="see-product-link">
         See product
       </a></li>
        <li (click)="onDeleteReview(review)">Delete</li>
      </ul>
    </div>
  </div>

  <!-- Load More Button -->
  <div class="load-more-container" *ngIf="hasMoreUserReviews">
    <button class="loadmorebtn" (click)="onLoadMoreUserReviews()">
      Load more
    </button>
  </div>
</div>




        <div *ngIf="activeTab === 'Access'" class="access-tab">
            <h2 class="section-title">Access</h2>

            <!-- Change Password Section -->
            <form [formGroup]="passwordForm" (ngSubmit)="onPasswordSubmit()" class="access-form">
                <h3 class="sub-title">Change Password</h3>

                <div class="form-group">
                    <label for="oldPassword">Old Password</label>
                    <div class="password-wrapper">
                        <input id="oldPassword" [type]="showOldPassword ? 'text' : 'password'"
                            formControlName="oldPassword" required>
                        <img src="../../../assets/images/eyeclosed_password.svg" alt="Toggle visibility"
                            class="eye-icon" *ngIf="!showOldPassword" (click)="togglePassword('old')">
                        <img src="../../../assets/images/visible_password.svg" alt="Toggle visibility" class="eye-icon"
                            *ngIf="showOldPassword" (click)="togglePassword('old')">
                    </div>
                </div>

                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <div class="password-wrapper">
                        <input id="newPassword" [type]="showNewPassword ? 'text' : 'password'"
                            formControlName="newPassword" required>
                        <img src="../../../assets/images/eyeclosed_password.svg" alt="Toggle visibility"
                            class="eye-icon" *ngIf="!showNewPassword" (click)="togglePassword('new')">
                        <img src="../../../assets/images/visible_password.svg" alt="Toggle visibility" class="eye-icon"
                            *ngIf="showNewPassword" (click)="togglePassword('new')">
                    </div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Re-enter New Password</label>
                    <div class="password-wrapper">
                        <input id="confirmPassword" [type]="showConfirmPassword ? 'text' : 'password'"
                            formControlName="confirmPassword" required>
                        <img src="../../../assets/images/eyeclosed_password.svg" alt="Toggle visibility"
                            class="eye-icon" *ngIf="!showConfirmPassword" (click)="togglePassword('confirm')">
                        <img src="../../../assets/images/visible_password.svg" alt="Toggle visibility" class="eye-icon"
                            *ngIf="showConfirmPassword" (click)="togglePassword('confirm')">
                    </div>
                </div>

                <button type="submit" [disabled]="passwordForm.invalid" class="update-btn">
                    Update Password
                </button>
            </form>


            <!-- Danger Zone Section -->


            <!-- Delete Confirmation Modal -->
            <div class="danger-zone">
                <h3 class="sub-title">Danger Zone</h3>
                <p class="danger-text">Deleting your account is permanent and cannot be undone.</p>
                <button class="delete-btn" (click)="showDeleteConfirm = true">Delete Account</button>
            </div>

            <!-- Delete Confirmation Modal -->
            <div class="modal-backdrop" *ngIf="showDeleteConfirm" (click)="showDeleteConfirm = false">

                <div class="modal" *ngIf="showDeleteConfirm">
                    <div class="modal-content">
                        <h3 class="modal-title">Are you sure?</h3>
                        <p class="modal-warning">
                            Deleting your account will permanently remove your account and all associated data.
                        </p>
                        <ul class="modal-bullets">
                            <li><img src="../../../assets/images/points.svg" alt=""> All published products will be
                                permanently deleted.</li>
                            <li><img src="../../../assets/images/points.svg" alt="">All reviews will be permanently
                                removed.</li>
                            <li><img src="../../../assets/images/points.svg" alt="">You will lose access to your account
                                and all related data.</li>
                        </ul>
                        <div class="modal-actions">
                            <button class="cancel-btn" (click)="showDeleteConfirm = false">Cancel</button>
                            <button class="confirm-btn" (click)="onDeleteAccount()">Yes, Delete</button>
                        </div>
                    </div>
                </div>

            </div>

        </div>






    </div>
</div>

<div class="toast-message" [ngClass]="messageClass" [style.opacity]="messageVisible ? 1 : 0">
    {{ message }}
</div>